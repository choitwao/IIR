# IIR - SPIMI

Some cool implementation of information retrieval.

## To run the application
- install the dependencies with `pip install -r requirements.txt`
- run `python -m main init -b {block_size} -m {memory_size}` to build the inverted index. The `{memory_size}` is optional and by default it will take the value of the free memory of your computer.
- run `python -m main {word,and,or} QUERY` for searching. Note that for `word` the system treat the query as a term.

## Test Queries
- Single word query: `python -m main word america`
- AND query: `python -m main and america,china`
- OR query: `python -m main or america,china`

## Test Results
```
python -m main word america
Found 441 results:
[2, 50, 51, 74, 79, 224, 382, 397, 412, 474, 478, 496, 505, 550, 556, 650, 652, 853, 854, 904, 939, 950, 965, 1019, 1052, 1076, 1095, 1133, 1214, 1215, 1292, 1333, 1357, 1362, 1402, 1416, 1422, 1498, 1527, 1533, 1552, 1579, 1609, 1654, 1661, 1662, 1694, 1729, 1739, 1812, 1854, 1990, 2019, 2128, 2202, 2255, 2260, 2374, 2447, 2554, 2558, 2657, 2713, 2737, 2781, 2877, 2916, 2973, 2991, 3048, 3163, 3168, 3175, 3183, 3184, 3200, 3290, 3325, 3349, 3384, 3420, 3444, 3534, 3540, 3564, 3567, 3573, 3615, 3676, 3738, 3751, 3759, 3803, 3869, 3923, 3957, 4081, 4092, 4
133, 4136, 4167, 4235, 4239, 4292, 4322, 4329, 4467, 4702, 4800, 4846, 4852, 4893, 4916, 4936, 4969, 4979, 5004, 5039, 5063, 5131, 5471, 5473, 5488, 5559, 5585, 5587, 5593, 5697, 5703, 5759, 5771, 5808, 5825, 5864, 5887, 5955, 6003, 6027, 6144, 6193, 6217, 6262, 6282, 6315, 6360, 6377, 6393, 6657, 6700, 6704, 6747, 6766, 6796, 6896, 6915, 6916, 6923, 6944, 6956, 7024, 7091, 7135, 7137, 7168, 7175, 7218, 7237, 7290, 7356, 7393, 7398, 7401, 7406, 7451, 7532, 7577, 7578, 7582, 7589, 7600, 7778, 7781, 7803, 7820, 7846, 7892, 7995, 8003, 8055, 8075, 8094, 8101
, 8128, 8136, 8183, 8201, 8203, 8271, 8277, 8325, 8372, 8421, 8471, 8475, 8483, 8567, 8582, 8594, 8633, 8702, 8962, 8963, 8980, 9042, 9298, 9582, 9591, 9630, 9655, 9673, 9733, 9742, 9771, 9866, 10049, 10117, 10133, 10150, 10302, 10347, 10430, 10623, 10640, 10647, 10767, 10780, 10783, 10788, 10905, 10918, 10934, 10948, 10953, 10974, 10993, 11026, 11156, 11165, 11313, 11589, 11615, 11628, 11664, 11732, 11773, 11895, 12048, 12099, 12277, 12328, 12358, 12395, 12432, 12457, 12473, 12518, 12590, 12647, 12716, 12799, 12836, 12848, 12865, 12892, 12928, 12973, 129
79, 13051, 13063, 13134, 13209, 13234, 13285, 13295, 13546, 14096, 14210, 14754, 14858, 15031, 15206, 15235, 15279, 15309, 15343, 15360, 15370, 15470, 15472, 15478, 15549, 15556, 15786, 15969, 16018, 16088, 16113, 16175, 16187, 16387, 16389, 16391, 16438, 16524, 16561, 16566, 16664, 16677, 16709, 16752, 16798, 16875, 16926, 16944, 16964, 16968, 16995, 17103, 17109, 17153, 17227, 17288, 17315, 17324, 17335, 17356, 17357, 17413, 17428, 17435, 17480, 17486, 17515, 17571, 17622, 17632, 17653, 17718, 17750, 17773, 17783, 17804, 17805, 17818, 17822, 17829, 1787
2, 17901, 17917, 17931, 17945, 18057, 18089, 18105, 18234, 18237, 18250, 18301, 18337, 18361, 18401, 18411, 18412, 18414, 18416, 18457, 18467, 18473, 18546, 18567, 18571, 18589, 18596, 18682, 18714, 18745, 18759, 18877, 18911, 18942, 19006, 19026, 19032, 19116, 19138, 19173, 19203, 19264, 19353, 19367, 19400, 19430, 19436, 19446, 19456, 19599, 19608, 19626, 19684, 19719, 19765, 19782, 19810, 19849, 19905, 19942, 19949, 20091, 20212, 20245, 20268, 20475, 20508, 20576, 20598, 20772, 20883, 20902, 20991, 21002, 21013, 21126, 21216, 21257, 21347, 21386, 21391
, 21422, 21546, 21549, 21571]
```
```
python -m main word china
Found 301 results:
[43, 67, 180, 239, 241, 280, 281, 292, 297, 303, 311, 314, 342, 356, 476, 590, 871, 908, 925, 930, 945, 960, 1021, 1022, 1257, 1377, 1385, 1594, 1687, 1815, 1839, 1901, 1902, 1907, 1919, 1944, 1968, 2172, 2382, 2456, 2958, 2969, 2975, 2977, 2981, 2995, 3003, 3331, 3374, 3377, 3429, 3442, 3485, 3488, 3497, 3521, 3546, 3568, 3737, 3835, 3904, 3966, 4040, 4041, 4044, 4049, 4057, 4077, 4084, 4125, 4180, 4200, 4232, 4593, 4630, 4637, 4679, 4689, 4965, 5147, 5158, 5220, 5224, 5250, 5252, 5272, 5275, 5781, 5800, 5822, 5826, 5841, 5979, 6114, 6215, 6296, 6335, 63
51, 6353, 6376, 6389, 6557, 6703, 6735, 6811, 6949, 6968, 6976, 6979, 7534, 7545, 7549, 7578, 7667, 8061, 8067, 8116, 8143, 8161, 8242, 8613, 8626, 8627, 8645, 9140, 9142, 9144, 9145, 9180, 9183, 9186, 9194, 9206, 9223, 9226, 9254, 9256, 9398, 9670, 9691, 9696, 9702, 9704, 9732, 9793, 9843, 10120, 10175, 10203, 10302, 10347, 10367, 10494, 10622, 10628, 10629, 10634, 10635, 10666, 10667, 10745, 10835, 11172, 11174, 11178, 11204, 11216, 11218, 11233, 11242, 11251, 11275, 11352, 11473, 11536, 11582, 11768, 11769, 11782, 11813, 11885, 11975, 12002, 12174, 123
11, 12431, 12458, 12552, 12730, 12734, 12750, 12755, 12778, 12825, 12837, 12849, 12878, 12879, 12931, 12980, 12999, 13123, 13237, 13255, 13279, 13313, 13366, 13851, 13915, 13963, 14211, 14230, 14289, 14419, 14828, 14854, 14858, 14882, 14889, 14909, 14950, 15287, 15366, 15382, 15388, 15392, 15401, 15409, 15472, 15525, 15869, 15871, 15925, 16107, 16122, 16123, 16124, 16131, 16144, 16147, 16254, 16562, 16750, 16753, 16758, 16761, 16775, 16776, 16788, 16937, 16938, 16939, 16965, 16970, 17084, 17207, 17214, 17215, 17233, 17234, 17235, 17297, 17373, 17379, 1738
3, 17429, 17443, 17460, 17731, 17803, 17879, 17923, 17934, 17935, 18257, 18348, 18398, 18439, 18466, 18473, 18557, 18839, 18928, 18939, 18954, 19035, 19067, 19073, 19086, 19097, 19101, 19149, 19373, 19509, 19540, 19685, 19694, 20555, 21090, 21523, 21530]
```
```
python -m main and america,china
Found 6 results:
[7578, 10302, 10347, 14858, 15472, 18473]
```
```
python -m main or  america,china
Found 736 results:
[18473, 10302, 10347, 15472, 14858, 7578, 6144, 15360, 2, 16387, 16389, 16391, 8201, 8203, 12311, 18457, 20508, 4125, 18466, 18467, 4133, 4136, 43, 6193, 50, 51, 16438, 11615, 9226, 17460, 11275, 12358, 4167, 19097, 6217, 74, 20555, 79, 2128, 14419, 4180, 8277, 20576, 15279, 4200, 18546, 20598, 2172, 18557, 10367, 8325, 1729, 4232, 11628, 6282, 4235, 16524, 4239, 12432, 9582, 6296, 2202, 18589, 5147, 18596, 12457, 12458, 6315, 16561, 16562, 180, 16566, 12473, 10430, 6335, 4292, 17783, 2255, 6353, 2260, 6360, 224, 4322, 8421, 12518, 5841, 6376, 6377, 239,
241, 6389, 6393, 18682, 10494, 21422, 12552, 8471, 16664, 281, 18714, 8475, 8483, 20772, 16677, 11313, 297, 8242, 12590, 303, 311, 18745, 314, 16709, 2374, 18759, 2382, 342, 356, 12647, 16750, 16752, 16753, 4467, 16758, 8567, 16761, 382, 10623, 10628, 10629, 8582, 16775, 16776, 10634, 10635, 397, 2447, 10640, 8594, 20883, 16788, 10647, 2456, 412, 17818, 16798, 14754, 8613, 20902, 10666, 10667, 12716, 6557, 8626, 8627, 17822, 9630, 8633, 12730, 18877, 12734, 8645, 12750, 12755, 474, 8271, 476, 478, 18911, 3835, 7995, 12778, 16875, 14828, 496, 4593, 9223, 5
[18473, 10302, 10347, 15472, 14858, 7578, 6144, 15360, 2, 16387, 16389, 16391, 8201, 8203, 12311, 18457, 20508, 4125, 18466, 18467, 4133, 4136, 43, 6193, 50, 51, 16438, 11615, 9226, 17460, 11275, 12358, 4167, 19097, 6217, 74, 20555, 79, 2128, 14419, 4180, 8277, 20576, 15279, 4200
, 18546, 20598, 2172, 18557, 10367, 8325, 1729, 4232, 11628, 6282, 4235, 16524, 4239, 12432, 9582, 6296, 2202, 18589, 5147, 18596, 12457, 12458, 6315, 16561, 16562, 180, 16566, 12473, 10430, 6335, 4292, 17783, 2255, 6353, 2260, 6360, 224, 4322, 8421, 12518, 5841, 6376, 6377, 239,
 241, 6389, 6393, 18682, 10494, 21422, 12552, 8471, 16664, 281, 18714, 8475, 8483, 20772, 16677, 11313, 297, 8242, 12590, 303, 311, 18745, 314, 16709, 2374, 18759, 2382, 342, 356, 12647, 16750, 16752, 16753, 4467, 16758, 8567, 16761, 382, 10623, 10628, 10629, 8582, 16775, 16776,
10634, 10635, 397, 2447, 10640, 8594, 20883, 16788, 10647, 2456, 412, 17818, 16798, 14754, 8613, 20902, 10666, 10667, 12716, 6557, 8626, 8627, 17822, 9630, 8633, 12730, 18877, 12734, 8645, 12750, 12755, 474, 8271, 476, 478, 18911, 3835, 7995, 12778, 16875, 14828, 496, 4593, 9223,
 505, 2554, 18939, 2558, 20991, 6657, 18839, 14854, 21002, 10767, 6915, 21013, 4630, 12825, 10780, 4637, 16926, 10783, 14882, 12836, 12837, 550, 14889, 16938, 16939, 556, 6703, 16944, 12849, 14909, 19006, 12865, 16964, 16965, 4679, 16968, 16970, 5559, 12878, 6735, 4689, 19026, 10
835, 7137, 19032, 6747, 12892, 4702, 2657, 21090, 16995, 14950, 6766, 19067, 12928, 19073, 12395, 21126, 3521, 650, 6796, 19086, 17207, 10905, 6811, 19101, 10918, 19116, 12973, 4893, 2737, 12979, 12980, 10934, 15031, 17084, 4800, 19138, 10948, 6262, 12999, 10953, 19149, 17103, 17
109, 8003, 2781, 10974, 21216, 19173, 16187, 4846, 6896, 10993, 4852, 3540, 13051, 17153, 8962, 19203, 6916, 13063, 21257, 6923, 11026, 8980, 18439, 16175, 1498, 6944, 9691, 6949, 18567, 6956, 4916, 12848, 6968, 2877, 17214, 17215, 6976, 18571, 4936, 17227, 4329, 13134, 17233, 90
42, 17235, 853, 854, 12099, 12431, 21347, 2916, 4965, 15206, 871, 19942, 7024, 4979, 8963, 13123, 1257, 19264, 15235, 904, 17829, 21386, 908, 2958, 21391, 5272, 6979, 11156, 19353, 925, 2975, 2977, 930, 17315, 11172, 2981, 11174, 19367, 11178, 939, 17324, 19373, 6215, 2991, 945,
13234, 2995, 9140, 13237, 9142, 15287, 9144, 9145, 3003, 960, 11204, 965, 13255, 19400, 17356, 17357, 11216, 11218, 3374, 10745, 1533, 9180, 17373, 9183, 11233, 9186, 17379, 13285, 19430, 17383, 3048, 9194, 19436, 17234, 17917, 11251, 8702, 19446, 12799, 1021, 1022, 7168, 13313,
17413, 15366, 7175, 15370, 5131, 19456, 21523, 17428, 17429, 15382, 21530, 17435, 1052, 15392, 17443, 5158, 9256, 15401, 21546, 21549, 15409, 7218, 1076, 19509, 13366, 8372, 19949, 21571, 7237, 1095, 17480, 17486, 2969, 9298, 19540, 17934, 11352, 3163, 3168, 5220, 3175, 5224, 175
15, 1133, 15470, 3183, 3184, 18928, 15478, 4969, 7290, 3200, 5250, 5252, 19599, 19608, 5275, 17571, 15525, 19626, 1907, 9398, 7356, 15549, 1214, 1215, 15556, 2973, 11473, 17622, 10788, 3290, 6351, 17632, 7393, 19684, 19685, 7398, 7401, 13546, 7406, 18301, 12931, 17653, 16937, 3325, 1579, 5771, 7135, 19719, 6700, 1292, 11536, 14211, 3349, 11773, 6704, 15388, 3377, 1333, 17718, 3384, 11582, 8075, 11589, 19782, 5004, 135
7, 1362, 17750, 3420, 12048, 5471, 5473, 19810, 3429, 17297, 1385, 7532, 17773, 7534, 5488, 3442, 3444, 9591, 7545, 1402, 7549, 5697, 1416, 19849, 17803, 17804, 17805, 1422, 11664, 19694, 13209, 7577, 9254, 3485, 7582, 3488, 7589, 3497, 15786, 11165, 7600, 9655, 19905, 9670, 18954, 9673, 3534, 17872, 5585, 5587, 11732, 590, 17879, 5593, 3546, 12879, 16144, 9696, 9702, 9704, 3564, 17901, 3567, 3568, 7667, 3573, 1527, 1
1768, 11769, 15869, 15871, 17923, 9732, 9733, 11782, 17931, 9742, 17935, 1552, 3331, 10622, 17288, 17945, 13851, 3615, 19035, 11813, 9771, 7091, 15925, 12328, 1594, 9793, 950, 5703, 1609, 17335, 13915, 3676, 3966, 15969, 7778, 7781, 11885, 9843, 1654, 11895, 7803, 1661, 1662, 5759, 18057, 9866, 13963, 7820, 18942, 280, 16018, 5781, 1687, 3737, 3738, 1694, 7451, 7846, 3751, 5800, 18089, 5063, 3759, 5808, 8136, 18105, 5
822, 5825, 5826, 11975, 1739, 15309, 11242, 7892, 16088, 292, 3803, 12002, 20091, 4049, 5864, 16107, 16113, 20212, 16122, 16123, 16124, 5887, 16131, 14096, 16147, 1812, 20245, 1815, 3869, 5039, 20268, 1839, 18234, 13279, 18237, 1854, 19765, 3904, 10049, 5955, 18401, 652, 18250, 18257, 3923, 5979, 67, 1901, 1902, 6003, 3957, 8055, 8061, 16254, 1919, 14210, 8067, 10117, 10120, 6027, 12174, 1019, 17731, 10133, 14230, 271
3, 1944, 15343, 8094, 18337, 8101, 10150, 13295, 18348, 1968, 8116, 18361, 10175, 8128, 9206, 1990, 4040, 4041, 4044, 1377, 8143, 14289, 4057, 10203, 18398, 8161, 6114, 2019, 18411, 18412, 4077, 18414, 18416, 4081, 4084, 12277, 8183, 20475, 4092]

```

## TODO
- Normalization of queries
- Improve merging algorithm
- Apply BM25 algorithm to rank the results
